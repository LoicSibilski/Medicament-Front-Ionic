<ion-content color="primary">
    <form [formGroup]="medicForm">
        <ion-text>
            <h1>Ajouter un médicament</h1>
        </ion-text>
    
        <ion-item class="layer2">
            <ion-label><h1>Nom :</h1></ion-label>
            <ion-input name="nom" type="text" formControlName="nom"></ion-input>
            
        </ion-item>
        <ion-list id="suggestions">
           
            <ion-item *ngFor="let suggestion of listeSuggestions" class="suggestion-item">
                    <ion-text>
                        {{suggestion}}
                    </ion-text>
            </ion-item>
           
            
        </ion-list>
        <div id="cache-font" *ngIf="listeSuggestions.length>0"></div>
        
        <ion-item (click)="openModalDureeForm()">
            <ion-label><h1>Duree :</h1></ion-label>
            <ion-text >
                <h1 *ngIf="choixDureePendantX()">Pendant {{dureeDataDto.nbJour}} jours</h1>
                <h1 *ngIf="dureeDataDto.dateDebut!=null">Début : {{dureeDataDto.dateDebut | date : 'dd/MM/yyyy'}}</h1>
                <h1 *ngIf="choixDureeJusqueX()">Fin : {{dureeDataDto.dateFin | date : 'dd/MM/yyyy'}}</h1>
                <h1 *ngIf="dureeDataDto.choixDuree==='Pas de fin'">Pas de fin</h1>
            </ion-text>
        </ion-item>
        
        <ion-item (click)="openModalFrequenceForm()">
            <ion-label><h1>Frequence :</h1></ion-label>

            <ion-label>{{frequenceDataDto.choixFrequence}}</ion-label>

            <ion-label *ngIf="choixFrequenceChaqueJoursTtsXHeures()">{{frequenceDataDto.heureDebut}}</ion-label>
            <ion-label *ngIf="choixFrequenceChaqueJoursTtsXHeures()">{{frequenceDataDto.rappel}}</ion-label>
            <ion-label *ngIf="choixFrequenceChaqueJoursTtsXHeures()">{{frequenceDataDto.heureFin}}</ion-label>

            <ion-label *ngIf="choixFrequenceTtsxJours()">x = {{frequenceDataDto.x}} </ion-label>

            <ion-label *ngIf="choixFrequenceCertainsJours() && certainsJoursLundi()">Lundi</ion-label>
            <ion-label *ngIf="choixFrequenceCertainsJours() && certainsJoursMardi()">Mardi</ion-label>
            <ion-label *ngIf="choixFrequenceCertainsJours() && certainsJoursMercredi()">Mercredi</ion-label>
            <ion-label *ngIf="choixFrequenceCertainsJours() && certainsJoursJeudi()">Jeudi</ion-label>
            <ion-label *ngIf="choixFrequenceCertainsJours() && certainsJoursVendredi()">Vendredi</ion-label>
            <ion-label *ngIf="choixFrequenceCertainsJours() && certainsJoursSamedi()">Samedi</ion-label>
            <ion-label *ngIf="choixFrequenceCertainsJours() && certainsJoursDimanche()">Dimanche</ion-label>

        </ion-item>


            <ion-card>
                <ion-card-header>
                    <ion-label>Heures de prises</ion-label>
                </ion-card-header>

                <ion-card-content>
                    <ng-container *ngIf="!choixFrequenceChaqueJoursTtsXHeures()">

                        <ion-item >
                            <ion-button (click)="addHeures()">Ajouter heures</ion-button>
                        </ion-item>

                        <ion-item formArrayName="heures"
                            *ngFor="let he of medicForm.controls.heures?.value; let i = index; trackBy: trackByFn">
                            <ion-item [formGroupName]="i">
                                <ion-label>Heure</ion-label>
                                <ion-datetime displayFormat="HH:mm" formControlName="heure"></ion-datetime>

                            </ion-item>
    
                            <ion-item class="ajouter-heure-form" formArrayName="heures"
                                *ngFor="let he of medicForm.controls.heures?.value; let i = index; trackBy: trackByFn">
                                <ion-item [formGroupName]="i">
                                    <ion-label>Heure</ion-label>
                                    <ion-datetime displayFormat="hh:mm" formControlName="heure"></ion-datetime>
                                </ion-item>
                            </ion-item>
    
                        </ng-container>
                    </ion-card-content>
                </ion-card>

            <ion-item>
                <ion-button (click)="ajouter()">Save</ion-button>
            </ion-item>


    </form>
</ion-content>